<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="JavaScript," />










<meta name="description" content="前言&amp;#160; &amp;#160; &amp;#160;&amp;#160;开始正式起步JavaScript的学习了，根据知乎的建议买了两本书《JavaScript DOM编程艺术》以及《JavaScript高级程序设计》，我打算先从编程艺术入手，全书将会围绕着一个具体的网页效果展开，使读者对JavaScript有个整体的了解。">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript DOM 编程艺术 阅读笔记">
<meta property="og:url" content="http://chinti.xyz/2018/01/07/JavaScript-DOM-编程艺术-阅读笔记/index.html">
<meta property="og:site_name" content="ChinTi&#39;s Blog">
<meta property="og:description" content="前言&amp;#160; &amp;#160; &amp;#160;&amp;#160;开始正式起步JavaScript的学习了，根据知乎的建议买了两本书《JavaScript DOM编程艺术》以及《JavaScript高级程序设计》，我打算先从编程艺术入手，全书将会围绕着一个具体的网页效果展开，使读者对JavaScript有个整体的了解。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-01-23T14:28:19.521Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript DOM 编程艺术 阅读笔记">
<meta name="twitter:description" content="前言&amp;#160; &amp;#160; &amp;#160;&amp;#160;开始正式起步JavaScript的学习了，根据知乎的建议买了两本书《JavaScript DOM编程艺术》以及《JavaScript高级程序设计》，我打算先从编程艺术入手，全书将会围绕着一个具体的网页效果展开，使读者对JavaScript有个整体的了解。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://chinti.xyz/2018/01/07/JavaScript-DOM-编程艺术-阅读笔记/"/>





  <title>JavaScript DOM 编程艺术 阅读笔记 | ChinTi's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ChinTi's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">欢迎来到我的个人站</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://chinti.xyz/2018/01/07/JavaScript-DOM-编程艺术-阅读笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chinti">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ChinTi's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JavaScript DOM 编程艺术 阅读笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-07T16:03:38+08:00">
                2018-01-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/01/07/JavaScript-DOM-编程艺术-阅读笔记/" class="leancloud_visitors" data-flag-title="JavaScript DOM 编程艺术 阅读笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&#160; &#160; &#160;&#160;开始正式起步JavaScript的学习了，根据知乎的建议买了两本书《JavaScript DOM编程艺术》以及《JavaScript高级程序设计》，我打算先从编程艺术入手，全书将会围绕着一个具体的网页效果展开，使读者对JavaScript有个整体的了解。<br><a id="more"></a></p>
<h2 id="第一章：JavaScript简史"><a href="#第一章：JavaScript简史" class="headerlink" title="第一章：JavaScript简史"></a>第一章：JavaScript简史</h2><p>&#160; &#160; &#160;&#160;正如其名，本章主要介绍了JavaScript的起源，还有浏览器战争和DOM演变史。</p>
<ul>
<li>JavaScript的起源，它是由Netscape公司与Sun公司合作开发的。在它出现之后，网页的可交互性得到了显著改善。JavaScript是一种脚本语言。</li>
<li>DOM是一套对文档的内容进行抽象和概念化的方法。</li>
<li><p>浏览器战争</p>
<ul>
<li>DHTML，是Dynamic HTML(动态HTML)的缩写，它不是一个新技术，而是描述HTML、CSS和JavaScript技术组合的术语，其含义为</li>
</ul>
<ol>
<li>利用HTML把网页标记为各种元素</li>
<li>利用CSS设置元素样式和它们的显示位置</li>
<li>利用JavaScript实时的操控页面和改变样式</li>
</ol>
<ul>
<li>浏览器之间的冲突，Netscape公司的DOM和微软公司的DOM采用了不一样的方式，导致脚本不得不编写两次，并且为了确保正确向浏览器提供脚本，程序员必须写一些代码去探查在客户端运行的浏览器是哪一种</li>
</ul>
</li>
<li><p>制定标准，W3C结合大家的优点推出了一个标准化的DOM</p>
<ul>
<li>浏览器以外的考虑，DOM是一种API（应用编程接口），它可以使人们更方便的交流与合作</li>
<li>浏览器战争的结局，微软战胜了Netscape只是因为IE随系统附带而已</li>
<li>崭新的起点，现今几乎所有的浏览器都内置了对DOM的支持，只要遵循最新的DOM标准，就可以大胆去做</li>
</ul>
</li>
</ul>
<hr>
<h2 id="第二章：JavaScript语法"><a href="#第二章：JavaScript语法" class="headerlink" title="第二章：JavaScript语法"></a>第二章：JavaScript语法</h2><p>&#160; &#160; &#160;&#160;本章主要是介绍JS语法，其实大多数与其他语言差不多，稍微记一些差别就行</p>
<ul>
<li><p>准备工作，只需要文本编辑器（嗯 继续用记事本）和一个浏览器，可以通过两种方式执行JS代码</p>
<ul>
<li>第一种方式是将JS代码放入<code>head</code>标签中的<code>script</code>标签之间</li>
<li>第二种方式是将代码存在一个扩展名为.js的独立文件，典型方式为在<code>head</code>放一个<code>script</code>并将它的<code>src</code>指向该文件，例如：<code>&lt;script src = &quot;file.js&quot;&gt;&lt;/script&gt;</code>,但是更好的方式是将<code>script</code>放在HTML文档末尾，<code>&lt;/body&gt;</code>之前，可以使浏览器更快的加载页面</li>
<li>本章给了一个<code>text.html</code>其中<code>&lt;html lang = &quot;en&quot;&gt;</code>用于向搜索引擎表示该页面为html语言，且语言为英语，lang代表language，若想改成中文，可使用<code>zh-CN</code></li>
</ul>
</li>
<li><p>语法，语句，注释（<code>//,/*...*/,&lt;!--</code>）推荐使用前两个</p>
</li>
<li><p>变量（variable）与赋值（assignment），JS允许程序员直接对变量赋值无需事先声明，但是提前声明是一种良好的编程习惯,在JS中是区分大小写的，变量名中不允许包含空格或标点符号（美元符号<code>$</code>除外），同时第一位不允许是数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var mood = &quot;happy&quot;,age = 33;</span><br></pre></td></tr></table></figure>
</li>
<li><p>为了使变量易于阅读，可以在变量名中的适当位置插入下划线，例如<code>var my_mood = &quot;happy&quot;;</code>另一种方式称为驼峰式（camel case）,删除下划线，后面的新单词改用大写字母开头，例如<code>var myMood = &quot;happy&quot;;</code>,其中happy被称为字面量（literal），我想用何种命名方式主要还是靠实际工作中的团队约定吧</p>
</li>
<li><p>数据类型，JS是一种弱类型（weakly typed）语言，所以不需要进行类型声明（typing），所以程序员可随时改变变量的数据类型</p>
<ul>
<li><p>字符串，需要用单引号或者双引号包裹住，但是若字符串中包含所用引号，则需要在此之前加一个”\”进行转义（escaping）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var height = &quot;about 5&apos;10\&quot; tall&quot;;</span><br><span class="line">alert(height);</span><br></pre></td></tr></table></figure>
</li>
<li><p>数值，布尔值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var age = 33.5;</span><br><span class="line">var temperature = -20.33333;</span><br><span class="line"></span><br><span class="line">var sleeping = true;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>数组，之前三个都是标量（scalar），而存储一组值则需要数组（array）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var beatles = Array(4);</span><br><span class="line">var beatles = Array();//不知道元素个数时也能用</span><br><span class="line">array[index] = element; //填充（populating）</span><br><span class="line"></span><br><span class="line">var beatles = Array(&quot;John&quot;,&quot;Paul&quot;,&quot;George&quot;,&quot;Ringo&quot;);</span><br><span class="line">var beatles = [&quot;John&quot;,&quot;Paul&quot;,&quot;George&quot;,&quot;Ringo&quot;]//略随便</span><br></pre></td></tr></table></figure>
<ul>
<li>关联数组，可以使用明确下标，例如字符串,但这种方式不推荐<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var lennon = Array();</span><br><span class="line">lennon[&quot;name&quot;] = &quot;John&quot;;</span><br><span class="line">lennon[&quot;year&quot;] = 1940;</span><br><span class="line">lennon[&quot;living&quot;] = false;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>对象(Object)，与数组类似</p>
<ul>
<li>包含在对象中的数据可以通过两种形式访问，属性（property）和方法（method），为了使对象描述特定的人，需要通过new创建实例</li>
<li>内建对象，比如Array，和它的length属性，还有类似Math对象和Date对象</li>
<li>宿主对象，由浏览器提供的预定义对象被称为宿主对象（host object）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var lennon = Object();</span><br><span class="line">lennon.name = &quot;John&quot;;</span><br><span class="line">lennon.year = 1940;</span><br><span class="line">lennon.living = false;</span><br><span class="line"></span><br><span class="line">var lennon = &#123;name:&quot;John&quot;, year:1940; living:false &#125;; //花括号法</span><br><span class="line">Person.mood; Person.walk();</span><br><span class="line">var jeremy = new Person;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>操作（operation），进行计算和处理数据，和其他的语言差不多，除了要记住字符串与数值拼接在一起会自动转化为字符串，以及记住JS是弱类型语言</p>
</li>
<li>条件语句（if…else）,比较操作符（==, &gt;=, &lt;=, &gt;, &lt;, !=, ===, !==）,全等和严格不相等是在比较某些类似false 与””的情况下</li>
<li>逻辑操作符（&amp;&amp;, ||, !）,为了避免歧义”!”后面最好跟（）</li>
<li>循环语句（if, while, do…while, for）</li>
<li>函数，若多次使用同一段代码可以将他们封装为一个函数，通过<code>function</code>定义一个函数的语法（参数argument），且JS拥有许多内建函数，例如<code>alert</code></li>
<li>书中作者推荐利用下划线命名变量，驼峰法命名函数</li>
<li>变量的作用域，即全局变量和局部变量，在函数内定义变量避免二义性</li>
</ul>
<hr>
<h2 id="第三章：DOM"><a href="#第三章：DOM" class="headerlink" title="第三章：DOM"></a>第三章：DOM</h2><ul>
<li><strong>文档：DOM中的”D”</strong></li>
<li><strong>对象：DOM中的”O”</strong>,分为三种类型<ol>
<li>用户定义对象（user-defined object）：由程序员自行创建的对象</li>
<li>内建对象（naive object）：内建在JS中的对象</li>
<li>宿主对象（host object）：由浏览器提供的对象<br>在JS最初的版本，提供了window对象，通称为BOM（浏览器对象模型），它提供了window.open和window.blur等方法，这些方法实现了到处被滥用的各种弹出窗口和下拉菜单</li>
</ol>
</li>
<li><strong>模型：DOM中的”M”</strong>,它代表着”Model”模型，DOM将一份文档表示为一棵树，称为节点树</li>
<li>节点（node）<ul>
<li>元素节点</li>
<li>文本节点</li>
<li>属性节点</li>
</ul>
</li>
<li>CSS （class属性 和 id属性）</li>
<li><p>获取元素，3种DOM方法可以获取元素节点，分别是通过元素ID、通过标签名字和通过类名字</p>
<ol>
<li><p><strong>getElementById</strong>，文档中每个元素都是一个对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(id)</span><br><span class="line">//下面是个例子</span><br><span class="line">document.getElementByID(&quot;purchases&quot;)</span><br><span class="line">//你可以用typeof操作符验证返回的操作数</span><br><span class="line">alert(typeof document.getElementById(&quot;purchases&quot;));</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>getElementsByTagName</strong>，返回一个对象数组，通配符”*”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    element.getElementsByTagName(tag)</span><br><span class="line">    //下面是个例子</span><br><span class="line">    document.getElementsByTagName(&quot;li&quot;)</span><br><span class="line">    //再例</span><br><span class="line">    alert(document.getElementsByTagName(&quot;li&quot;).length);</span><br><span class="line">    //再再例</span><br><span class="line">    for (var i=0; i&lt;document.getElementsByTagName(&quot;li&quot;).length;i++)&#123;</span><br><span class="line">	alert(typeof document.getElementsByTagName(&quot;li&quot;)[i])；</span><br><span class="line">&#125;</span><br><span class="line">    //再再再例</span><br><span class="line">    var items = document.getElementsByTagName(&quot;li&quot;);</span><br><span class="line">    for (var i=0; i&lt;items.length;i++)&#123;</span><br><span class="line">	    alert(typeof items[i])；</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>getElementsByClassName</strong>，可以通过类名寻找元素，指定多个类，只需要在两者间加上空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getElementByClassName(class)</span><br><span class="line">//例</span><br><span class="line">alert(document.getElementsByClassName(&quot;important sale&quot;).length);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>[注]书中P42这里有一段函数用于匹配新老浏览器，现在已无用，但向后兼容性的思想应当记住</p>
<ul>
<li>获取和设置属性<ol>
<li><strong>getAttribute</strong>，用于查询属性<code>object.getAttribute(attribute)</code>,它不属于document对象，它只能通过元素节点对象调用</li>
<li><strong>setAttribute</strong>，允许我们对属性节点值做出修改<code>object.setAttribute(attribute,value)</code>，同样只能用于元素节点</li>
</ol>
</li>
</ul>
<hr>
<h2 id="第四章：案例研究：JavaScript图片库"><a href="#第四章：案例研究：JavaScript图片库" class="headerlink" title="第四章：案例研究：JavaScript图片库"></a>第四章：案例研究：JavaScript图片库</h2><p>&#160; &#160; &#160;&#160;本章将会被带着使用JS和DOM去建立一个图片库，首先编写一个优秀的标记文件，其次编写一个JS函数用以显示用户想要查看的图片，然后利用标记触发函数调用</p>
<ul>
<li><p>标记</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang = &quot;en&quot;&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line">  &lt;meta charset = &quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Image Gallery&lt;/title&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line">  &lt;h1&gt;Snapshots&lt;/h1&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">   &lt;li&gt;</span><br><span class="line">    &lt;a href = &quot;images/fireworks.jpg&quot; title = &quot;A fireworks display&quot;&gt;Fireworks&lt;/a&gt;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line">   &lt;li&gt;</span><br><span class="line">    &lt;a href = &quot;images/coffee.jpg&quot; title = &quot;A cup of black coffee&quot;&gt;Coffee&lt;/a&gt;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line">   &lt;li&gt;</span><br><span class="line">    &lt;a href = &quot;images/rose.jpg&quot; title = &quot;A red,red rose&quot;&gt;Rose&lt;/a&gt;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line">   &lt;li&gt;</span><br><span class="line">    &lt;a href = &quot;images/bigben.jpg&quot; title = &quot;The famous clock&quot;&gt;Big Ben&lt;/a&gt;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;img id = &quot;placeholder&quot; src = &quot;images/placeholder.gif&quot; alt = &quot;my image gallery&quot;&gt;//占位</span><br><span class="line">  &lt;script type = &quot;text/javascript&quot; src = &quot;showPic.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>JavaScript</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    //DOM方法如下</span><br><span class="line">    function showPic(whichpic)&#123;  </span><br><span class="line">	    var source = whichpic.getAttribute(&quot;href&quot;);</span><br><span class="line">	    var placeholder = whichpic.getElementById(&quot;placeholder&quot;);</span><br><span class="line">	    placeholder.setAttribute(&quot;src&quot;,source);</span><br><span class="line">&#125;</span><br><span class="line">    //非DOM方法如下,推荐使用DOM方法</span><br><span class="line">        placeholder.src = source;</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用这个JavaScript函数，添加事件处理函数（event handler）,这里需要注意的是，当你JS打错了会不执行然后页面正常跳转，我傻乎乎的找了半天html哪里写错了。。。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href = &quot;images/fireworks.jpg&quot; title = &quot;A fireworks display&quot; onclick = &quot;showPic(this); return false;&quot;&gt;Fireworks&lt;/a&gt; //在每个链接中加入onclick</span><br></pre></td></tr></table></figure>
</li>
<li><p>对这个函数进行扩展</p>
<ul>
<li>childNodes属性，可以用来获取任何一个元素的所有子元素，使用：<code>element.childNodes</code>,按书中要求我获得了9，是因为空格和换行符也会被解释为节点</li>
<li>nodeType属性，这个属性可以告诉我们节点是哪一种节点，它一共拥有12种值，但其中只有三个有实用价值，元素节点为1，属性节点为2，文本节点为3</li>
<li>nodeValue属性，用于得到和设置一个节点的值：<code>node.nodeValue</code>,这里要注意p元素本身的属性是个空值，你要找它的子节点，例如<code>alert(description.childNodes[0].nodeValue);</code></li>
<li>firstchild和lastchild属性</li>
</ul>
</li>
<li><p>加上CSS样式</p>
</li>
</ul>
<hr>
<h2 id="第五章：最佳实践"><a href="#第五章：最佳实践" class="headerlink" title="第五章：最佳实践"></a>第五章：最佳实践</h2><p>&#160; &#160; &#160;&#160;本章将介绍一些最佳实践，同时向读者介绍了四种思想：平稳退化，分离JavaScript，向后兼容性，性能考虑</p>
<ul>
<li>过去的错误，很多书中介绍的遗留问题在如今已经得到了解决<ul>
<li>不要怪罪JavaScript</li>
<li>Flash的遭遇</li>
<li>质疑一切，利用JS改变网页行为，必须三思而后行，确认是否必要</li>
</ul>
</li>
<li><p>平稳退化，若JS不被浏览器支持，虽然某些功能无法使用，但基本操作仍能顺利完成（现今基本不用担心支持问题）</p>
<ul>
<li><code>window.open(url,name,features)</code>，第三个参数是利用逗号分割的字符串，用于设定属性，例如尺寸显示位置等</li>
<li>“javascript:”伪协议，用于通过一个链接调用JavaScript函数，例如：<code>&lt;a href = &quot;javascript:popUp(&#39;http://www.example.com/&#39;);&quot;&gt;Example&lt;/a&gt;</code>，在html文档中通过伪协议调用JS代码并不好</li>
<li>内嵌的事件处理函数，类似onclick，<code>&lt;a href = &quot;#&quot; onclick = &quot;popUp(&#39;http://www.example.com&#39;); return false;&quot;&gt;Example&lt;/a&gt;</code>，若用户禁用JS这条链接将毫无作用</li>
<li>谁关心这个，除了禁用JS的浏览器的用户以外，你可以想象用户是搜索机器人，只有极少数搜索机器人可以理解JS代码，若你的网页无法平稳退化，它在搜索引擎上的排名会受到损害<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href = &quot;http://www.example.com/&quot; onclick = &quot;popUp(&apos;http://www.example.com&apos;); return false;&quot;&gt;Example&lt;/a&gt;</span><br><span class="line">//精简下</span><br><span class="line">&lt;a href = &quot;http://www.example.com/&quot; onclick = &quot;popUp(this.getAttribute(&apos;href&apos;)); return false;&quot;&gt;Example&lt;/a&gt;</span><br><span class="line">//利用DOM提供的的this.href</span><br><span class="line">&lt;a href = &quot;http://www.example.com/&quot; onclick = &quot;popUp(this.href); return false;&quot;&gt;Example&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>向CSS学习</p>
<ul>
<li>结构与样式的分离</li>
<li>渐进增强，“标记良好的内容就是一切”</li>
</ul>
</li>
<li><p>分离JavaScript，利用id或class作为挂钩<code>&lt;a href = &quot;http://www.example.com/&quot; class = &quot;popup&quot;&gt;Example&lt;/a&gt;</code>，在外部JS文件中完成事件动作<code>element.event = action...</code>，具体步骤：</p>
<ol>
<li>把文档里的所有链接放入一个数组</li>
<li>遍历数组</li>
<li>若果某个链接的class属性等于popup，就表示这个链接被点击时应该调用popUp()函数</li>
<li>于是，把这个连接的href传给popUp()函数，取消这个链接的默认行为<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">window.load = prepareLinks; //必须</span><br><span class="line">function prepareLinks() &#123;</span><br><span class="line">    var links = document.getElementsByTagName(&quot;a&quot;);</span><br><span class="line">    for(var i=0; i&lt;links.length; i++)&#123;</span><br><span class="line">        if(links[i].getAttribute(&quot;class&quot;) == &quot;popup&quot;)&#123;</span><br><span class="line">            popUp(this.getAttribute(&quot;href&quot;));</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function popUp(winURL) &#123;</span><br><span class="line">    window.open(winURL,&quot;popup&quot;,&quot;width=320,height=480&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>向后兼容</p>
<ul>
<li>对象检测，<code>if(method){statements}</code>，但是可读性较差，可以采用逻辑非的方式，<code>if(!method) return false;</code></li>
<li>浏览器嗅探技术（browser sniffung），这个风险很大，因为浏览器有时会说谎，将自己报告成另外一种浏览器（我想到edge报告自己是chrome）</li>
</ul>
</li>
<li><p>性能考虑</p>
<ul>
<li>尽量少访问DOM和尽量减少标记，只要查询某些元素就要遍历整个DOM树，最好的方法就是将第一次结果保存在一个变量中</li>
<li>合并和放置脚本</li>
<li>压缩脚本，代码压缩工具：<a href="http://www.crockford.com/javascript/jsmin.html" target="_blank" rel="noopener">Douglas Crockford的JSMin</a>、<a href="http://developer.yahoo.com/yui/compressor" target="_blank" rel="noopener">雅虎的YUI Compressor</a>、<a href="http://closure-compiler.appspot.com/home" target="_blank" rel="noopener">谷歌的Closure Compiler</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="第六章：案例研究：图片库改进版"><a href="#第六章：案例研究：图片库改进版" class="headerlink" title="第六章：案例研究：图片库改进版"></a>第六章：案例研究：图片库改进版</h2><p>&#160; &#160;&#160;&#160;本章是将上一章内容运用进之前所做的图片库</p>
<ul>
<li>快速回顾，确认它能否支持平稳退化</li>
<li><p>JS是否分离</p>
<ul>
<li>结构化程序设计备忘，通常认为函数只有一个出口和入口，但是过分拘泥这点会使代码难以阅读</li>
<li>添加事件处理函数</li>
</ul>
<ol>
<li>检查点，检查浏览器是否支持函数</li>
<li>变量名里有什么，用一些有意义的单词命名一长串代码，使代码更加易读和理解</li>
<li>遍历</li>
<li>改变行为</li>
<li>完成JavaScript函数</li>
</ol>
<ul>
<li>共享onload事件，将函数与onclick事件绑定，可以采用一个弹性的解决方案<code>addLoadEvent</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function addLoadEvent(func) &#123;</span><br><span class="line">    var oldonload = window.onload;</span><br><span class="line">    if(typeof window.onload != &apos;function&apos;) &#123;</span><br><span class="line">        window.onload = func;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        window.onload = function() &#123;</span><br><span class="line">            oldonload();</span><br><span class="line">            func();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>不要做太多假设，在实际工作中，检查需要根据具体情况来做出</p>
</li>
<li>键盘访问，<code>onkeypress</code>，但是最好不要用它，且<code>onclick</code>的支持已经够完美</li>
<li><p><code>prepareGallery</code>和<code>showPic</code>代码段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function showPic(whichpic) &#123;  </span><br><span class="line"> if (!document.getElementById(&quot;placeholder&quot;)) return false;</span><br><span class="line"> var source = whichpic.getAttribute(&quot;href&quot;);</span><br><span class="line"> var placeholder = document.getElementById(&quot;placeholder&quot;);</span><br><span class="line"> if (placeholder.nodeName != &quot;IMG&quot;) return false;</span><br><span class="line"> placeholder.setAttribute(&quot;src&quot;,source);</span><br><span class="line"> if (document.getElementById(&quot;description&quot;)) &#123;</span><br><span class="line">  var text = whichpic.getAttribute(&quot;title&quot;) ? whichpic.getAttribute(&quot;title&quot;):&quot;&quot;;</span><br><span class="line">  var description = document.getElementById(&quot;description&quot;);</span><br><span class="line">  if (description.firstChild.nodeType == 3)&#123;</span><br><span class="line">   description.firstChild.nodeValue = text;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function prepareGallery() &#123;</span><br><span class="line"> if (!document.getElementsByTagName) return false;</span><br><span class="line"> if (!document.getElementById) return false;</span><br><span class="line"> if (!document.getElementById(&quot;imagegallery&quot;)) return false;</span><br><span class="line"> var gallery = document.getElementById(&quot;imagegallery&quot;);</span><br><span class="line"> var links = gallery.getElementsByTagName(&quot;a&quot;);</span><br><span class="line"> for(var i=0; i &lt; links.length; i++) &#123;</span><br><span class="line">  links[i].onclick = function() &#123;</span><br><span class="line">   return showPic(this)? false:true;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把JavaScript与CSS结合起来</p>
</li>
<li>DOM Core和HTML-DOM</li>
</ul>
<hr>
<h2 id="第七章：动态创建标记"><a href="#第七章：动态创建标记" class="headerlink" title="第七章：动态创建标记"></a>第七章：动态创建标记</h2><p>&#160; &#160; &#160;&#160;本章主要是介绍一些传统方法和DOM方法</p>
<ul>
<li><p>一些传统方法</p>
<ul>
<li><code>document.write</code>，最大的缺点是它违背了“行为应该与表现分离”的原则</li>
<li><code>innerHTML</code>，用它读取内容毫无细节可言，会将标记和字符串一起读出，但是可以用来在js中把一段HTML内容完全替换进这个标签，无法做到插入，在XHTML中可能会忽略这个属性</li>
</ul>
</li>
<li><p>DOM方法</p>
<ul>
<li><code>createElement</code>方法，使用：<code>document.createElement(nodeName)</code>，用于创建元素节点，创建后，它成为了一个文档碎片（document fragment），但它已经具有了一个nodeType和一个nodeName值</li>
<li><code>appendChild</code>方法，使用：<code>parent.appendChild(child)</code>，用于插入某文档的节点树</li>
<li><code>createTextNode</code>方法，使用：<code>document.createTextNode(text)</code>，用于创建一个文本节点</li>
<li>一个更复杂的组合<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    window.onload = function() &#123;</span><br><span class="line">	    var para = document.createElement(&quot;p&quot;);</span><br><span class="line">        var txt1 = document.createTextNode(&quot;This is &quot;);</span><br><span class="line">	    para.appendChild(txt1);</span><br><span class="line">	    var emphasis = document.createElement(&quot;em&quot;);</span><br><span class="line">	    var txt2 = document.createTextNode(&quot;my&quot;);</span><br><span class="line">	    emphasis.appendChild(txt2);</span><br><span class="line">	    para.appendChild(emphasis);</span><br><span class="line">	    var txt3 = document.createTextNode(&quot; content. &quot;);</span><br><span class="line">	    para.appendChild(txt3);</span><br><span class="line">	    var testdiv = document.getElementById(&quot;testdiv&quot;);</span><br><span class="line">	    testdiv.appendChild(para);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>重回图片库</p>
<ul>
<li><code>insetBefore()</code>在已有元素前插入一个新元素，使用：<code>parentElement.insertBefore(newElement,targetElement)</code>，例如：<code>var gallery = document.getElementById(&quot;imagegallery&quot;);</code> <code>gallery.parentNode.insertBefore(placeholder,gallery)</code></li>
<li>在已有元素后插入一个新元素，并没有现成的函数，但是可以自己写，具体原理：若此元素为父元素最后一个孩子，使用<code>appendChild</code>，若不是，则利用<code>insertBefore</code>插入这个元素的下一个兄弟元素之前<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function insertAfter(newElement,targetElement)     &#123;</span><br><span class="line">    var parent = targetElement.parentNode;</span><br><span class="line">    if (parent.lastChild == targetElement) &#123;</span><br><span class="line">        parent.appendChild(newElement);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        parent.insertBefore(newElement,targetElement.nextSibling);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Ajax，这个词用于概括异步加载页面内容的技术</p>
<ul>
<li>XMLHttpRequest对象，它是Ajax技术的核心，充当浏览器中的脚本与服务器之间的中间人的角色，以往请求都是由浏览器发出，而现在JS也可以通过这个对象自己发送请求和处理响应，书中给了一个ajax例子，这里需要注意，Chrome本地服务器上并不能处理异步，换成火狐浏览器即可解决这个问题</li>
<li>渐进增强与Ajax</li>
<li>Hijax</li>
</ul>
</li>
</ul>
<hr>
<h2 id="第八章：充实文档的内容"><a href="#第八章：充实文档的内容" class="headerlink" title="第八章：充实文档的内容"></a>第八章：充实文档的内容</h2><p>&#160; &#160; &#160;&#160;本章将继续实践上一章学到的内容</p>
<ul>
<li>不应该做什么，不要把重要内容通过DOM技术添加到网页上</li>
<li>把“不可见”变成“可见”，可以利用DOM技术得到隐藏在属性里的信息，创建标记封装这些信息，把这些标记插入到文档</li>
<li>显示“缩略语列表”,并编写displayAbbreviations函数</li>
<li><code>for (variable in array)</code>可以用于遍历关联数组</li>
<li><p>过去版本的ie可能无法正常支持abbr，所以需要通过一些判断条件，在不支持时不执行这些js代码，即使某种浏览器会引起问题，但还是尽量不要用嗅探代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">    function displayAbbreviations() &#123;</span><br><span class="line">	if(!document.getElementsByTagName) return false;</span><br><span class="line">	if(!document.createElement) return false;</span><br><span class="line">	if(!document.createTextNode) return false;</span><br><span class="line">	// 取得所有缩略词</span><br><span class="line">	var abbreviations = document.getElementsByTagName(&quot;abbr&quot;);</span><br><span class="line">	if (abbreviations.length &lt; 1) return false;</span><br><span class="line">	var defs = new Array();</span><br><span class="line">	//遍历</span><br><span class="line">	for (var i=0; i&lt;abbreviations.length; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if (abbreviations[i].childNodes.length &lt; 1) continue;</span><br><span class="line">		var definition = abbreviations[i].getAttribute(&quot;title&quot;);</span><br><span class="line">		var key = abbreviations[i].lastChild.nodeValue;</span><br><span class="line">		defs[key] = definition;</span><br><span class="line">	&#125;</span><br><span class="line">	//创建定义列表</span><br><span class="line">	var dlist = document.createElement(&quot;dl&quot;);</span><br><span class="line">	//遍历定义</span><br><span class="line">	for (key in defs) &#123;</span><br><span class="line">		var definition = defs[key];</span><br><span class="line">		//创建定义标题</span><br><span class="line">		var dtitle = document.createElement(&quot;dt&quot;);</span><br><span class="line">		var dtitle_text = document.createTextNode(key);</span><br><span class="line">		dtitle.appendChild(dtitle_text);</span><br><span class="line">		//创建定义描述</span><br><span class="line">		var ddesc = document.createElement(&quot;dd&quot;);</span><br><span class="line">		var ddesc_text = document.createTextNode(definition);</span><br><span class="line">		ddesc.appendChild(ddesc_text);</span><br><span class="line">		//把它们添加到定义列表</span><br><span class="line">		dlist.appendChild(dtitle);</span><br><span class="line">		dlist.appendChild(ddesc);</span><br><span class="line">	&#125;</span><br><span class="line">	if (dlist.childNodes.length &lt; 1) return false;</span><br><span class="line">	//创建标题</span><br><span class="line">	var header = document.createElement(&quot;h2&quot;);</span><br><span class="line">	var header_text =document.createTextNode(&quot;Abbreviations&quot;);</span><br><span class="line">	header.appendChild(header_text);</span><br><span class="line">	//把标题添加到页面主体</span><br><span class="line">	document.body.appendChild(header);</span><br><span class="line">	//把定义列表添加到页面主体</span><br><span class="line">	document.body.appendChild(dlist);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示“文献来源链接表”，<code>cite</code>属性可以标识<code>blockquote</code>内容引自哪里，但是浏览器一般会完全忽略这个属性，在返回子节点时不要想当然，某些浏览器会将换行符也会解释为一个文本节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">    function displayCitations() &#123;</span><br><span class="line">	if (!document.getElementsByTagName) return false;</span><br><span class="line">	if (!document.createElement) return false;</span><br><span class="line">	if (!document.createTextNode) return false;</span><br><span class="line">	//取得所有引用</span><br><span class="line">	var quotes = document.getElementsByTagName(&quot;blockquote&quot;);</span><br><span class="line">	//遍历引用</span><br><span class="line">	for (var i=0; i&lt;quotes.length; i++)&#123;</span><br><span class="line">		//如果没有cite属性，继续循环</span><br><span class="line">		if (!quotes[i].getAttribute(&quot;cite&quot;)) continue;</span><br><span class="line">		//保存cite属性</span><br><span class="line">		var url = quotes[i].getAttribute(&quot;cite&quot;);</span><br><span class="line">		//取得引用中所有元素节点</span><br><span class="line">		var quoteChildren = quotes[i].getElementsByTagName(&quot;*&quot;);</span><br><span class="line">		//如果没有元素节点，继续循环</span><br><span class="line">		if (quoteChildren.length &lt; 1) continue;</span><br><span class="line">		//取得引用中的最后一个元素节点</span><br><span class="line">		var elem = quoteChildren[quoteChildren.length - 1];</span><br><span class="line">		//创建标记</span><br><span class="line">		var link = document.createElement(&quot;a&quot;);</span><br><span class="line">		var link_text = document.createTextNode(&quot;source&quot;);</span><br><span class="line">		link.appendChild(link_text);</span><br><span class="line">		link.setAttribute(&quot;href&quot;,url);</span><br><span class="line">		var superscript = document.createElement(&quot;sup&quot;);</span><br><span class="line">		superscript.appendChild(link);</span><br><span class="line">		//把标记添加到引用中的最后一个元素节点</span><br><span class="line">		elem.appendChild(superscript);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示“快捷键菜单”，<code>accesskey</code>属性可以把一个元素（如链接）与键盘上某个特定的按钮关联在一起，一般来说，Windows系统中，同时按下alt和特定按钮，在Mac中，是按下Ctrl，例<a href="index.html" accesskey="1">Home</a>，不要设置太多快捷键，会与浏览器内置快捷键冲突，<a href="http://clagnut.com/blog/193/" target="_blank" rel="noopener">常用方法</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">function displayAccessKeys() &#123;</span><br><span class="line">	if(!document.getElementsByTagName) return false;</span><br><span class="line">	if(!document.createElement) return false;</span><br><span class="line">	if(!document.createTextNode) return false;</span><br><span class="line">	//取得文档中所有链接</span><br><span class="line">	var links = document.getElementsByTagName(&quot;a&quot;);</span><br><span class="line">	//创建一个数组</span><br><span class="line">	var akeys = new Array();</span><br><span class="line">	//便利链接</span><br><span class="line">	for(var i=0; i&lt;links.length; i++) &#123;</span><br><span class="line">		var current_link = links[i];</span><br><span class="line">		//若没有accesskey继续循环</span><br><span class="line">		if(!current_link.getAttribute(&quot;accesskey&quot;)) continue;</span><br><span class="line">		//取得accesskey的值</span><br><span class="line">		var key = current_link.getAttribute(&quot;accesskey&quot;);</span><br><span class="line">		//取得链接文本</span><br><span class="line">		var text = current_link.lastChild.nodeValue;</span><br><span class="line">		//存入数组</span><br><span class="line">		akeys[key] = text;</span><br><span class="line">	&#125;</span><br><span class="line">	//创建列表</span><br><span class="line">	var list = document.createElement(&quot;ul&quot;);</span><br><span class="line">	//遍历访问键</span><br><span class="line">	for(key in akeys) &#123;</span><br><span class="line">		var text = akeys[key];</span><br><span class="line">		//创建放到列表项中的字符串</span><br><span class="line">		var str = key + &quot;:&quot; + text;</span><br><span class="line">		//创建列表项</span><br><span class="line">		var item = document.createElement(&quot;li&quot;);</span><br><span class="line">		var item_text = document.createTextNode(str);</span><br><span class="line">		item.appendChild(item_text);</span><br><span class="line">		//将列表项添加入列表</span><br><span class="line">		list.appendChild(item);</span><br><span class="line">	&#125;</span><br><span class="line">	//创建标题</span><br><span class="line">	var header = document.createElement(&quot;h3&quot;);</span><br><span class="line">	var header_text = document.createTextNode(&quot;Accesskeys&quot;);</span><br><span class="line">	header.appendChild(header_text);</span><br><span class="line">	//把标题添加到页面主体</span><br><span class="line">	document.body.appendChild(header);</span><br><span class="line">	document.body.appendChild(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="第九章：CSS-DOM"><a href="#第九章：CSS-DOM" class="headerlink" title="第九章：CSS-DOM"></a>第九章：CSS-DOM</h2><p>&#160; &#160; &#160;&#160;本章介绍如何利用DOM技术获取和设置CSS信息</p>
<ul>
<li>三位一体的网页，结构层、表示层、行为层</li>
<li>style属性，<code>element.style.property</code>，它也是一个对象</li>
<li>在调用诸如<code>font-family</code>这样的属性时，会将中间的连字符解释为减法操作符，需要将他变为驼峰命名法<code>fontFamily</code>，在火狐浏览器中，返回颜色值是以RGB（红，绿，蓝）</li>
<li>style属性只能返回内嵌样式，所以几乎没有实用价值。。，但是可以用于设置样式</li>
<li>何时需要设置样式<ul>
<li>根据元素在节点树里的位置来设置样式，<code>nextSibling</code></li>
<li>根据某种条件反复设置某种样式，书中给了一个让表格反复变色的例子，这不是一个很好的做法在现在尽量用CSS完成，例如：<code>tr:nth-child(odd) { background-color:   #ffc}</code></li>
<li>响应事件，CSS提供了<code>:hover</code>等伪class属性，DOM也可以通过<code>onmouseover</code>等事件对HTML元素的状态变化作出响应,同样尽可能利用CSS完成</li>
</ul>
</li>
<li><p><code>ClassName</code>属性，之前让DOM直接设置或修改样式，这种做法让“行为层”干了“表示层”的活，不如用JS代码更新这个元素的类名<code>element.className = value;</code>，<code>elem.setAttribute(&quot;class&quot;,&quot;intro&quot;);</code>的方式也可以，用下面这个函数可以添加类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function addClass(element,value) &#123;</span><br><span class="line">	if(!element.className) &#123;</span><br><span class="line">		element.className = value;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		newClassName = element.className;</span><br><span class="line">		newClassName += &quot; &quot;;</span><br><span class="line">		newClassName += value;</span><br><span class="line">		element.className = newClassName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>同时，可以对复杂的函数更进一步的抽象，以便通用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    function getNextElement(node) &#123;</span><br><span class="line">	if(node.nodeType == 1) &#123;</span><br><span class="line">		return node;</span><br><span class="line">	&#125;</span><br><span class="line">	if (node.nextSibling) &#123;</span><br><span class="line">		return getNextElement(node.nextSibling);</span><br><span class="line">	&#125;</span><br><span class="line">	return null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function styleHeaderSiblings(tag,theclass) &#123;</span><br><span class="line">	if (!document.getElementsByTagName) return false;</span><br><span class="line">	var headers = document.getElementsByTagName(tag);</span><br><span class="line">	var elem;</span><br><span class="line">	for (var i=0; i&lt;headers.length; i++) &#123;</span><br><span class="line">		elem = getNextElement(headers[i].nextSibling);</span><br><span class="line">		addClass(elem,theclass);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function addClass(element,value) &#123;</span><br><span class="line">	if(!element.className) &#123;</span><br><span class="line">		element.className = value;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		newClassName = element.className;</span><br><span class="line">		newClassName += &quot; &quot;;</span><br><span class="line">		newClassName += value;</span><br><span class="line">		element.className = newClassName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addLoadEvent(function()&#123;styleHeaderSiblings(&quot;h1&quot;,&quot;intro&quot;);&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="第十章：用JavaScript实现动画效果"><a href="#第十章：用JavaScript实现动画效果" class="headerlink" title="第十章：用JavaScript实现动画效果"></a>第十章：用JavaScript实现动画效果</h2><p>&#160; &#160; &#160;&#160;本章介绍了一些简单动画效果</p>
<ul>
<li>动画基础知识<ul>
<li>位置，<code>static fixed relative absolute</code></li>
<li>时间，<code>setTimeout(&quot;function&quot;,interval)</code>，第二个是以毫秒为单位设定时间，<code>variable = setTimeout(&quot;function&quot;,interval)</code>，然后<code>clearTimeout(variable)</code>，可以用来取消“等待执行”队列中的某个函数，例：<code>movement = setTimeout(&quot;moveMessage()&quot;,5000)</code></li>
<li>时间递增量，<code>parseInt(string)</code>和<code>parseFloat(string)</code>可以用于提取字符串中的数字</li>
<li>抽象，这里遇到一个<code>var repeat = &quot;moveElement(&#39;&quot;+elementID+&quot;&#39;,&quot;+final_x+&quot;,&quot;+interval+&quot;)&quot;;</code>，这句话一下子略难理解，实际上是repeat存入了一个字符串，然后其中所有的加号即为“和”，利用参数变量代替硬编码常数，你将可以随意重用它</li>
</ul>
</li>
<li>实用的动画，尽量避免内容在页面中移动<ul>
<li>提出问题，类似图片库那章，但是这次不是使用onclick事件，而是采用onmouseover事件，显示预览图片切换显示时多少会有点延时，若采用集体照的方式可以避免</li>
<li><code>overflow</code>，CSS中的这个属性可以用于处理一个元素的尺寸超过容器尺寸的情况，可以用它进行裁剪，它具有四个属性值<code>visible</code>不裁剪，溢出显示，<code>hidden</code>，隐藏，<code>scroll</code>隐藏，但是给一个滚动条，<code>auto</code>，与前一个类似，但是只有在确实溢出时才给滚动条，其中<code>position: relative</code>很重要，可以将子元素的坐标固定在lideshow左上角</li>
<li>变量作用域问题，全局变量会造成冲突，JS允许我们为元素创建属性，<code>element.property = value</code>，而移动元素太慢了，在调节步进时，遇上我们无法把一个元素移动不到一像素的距离，<code>Math.ceil(number)</code>可以返回一个向上取整得数<code>floor</code>向下取整，<code>round</code>四舍五入<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">    function prepareSlideshow() &#123;</span><br><span class="line">	if (!document.getElementById(&quot;linklist&quot;)) return false;</span><br><span class="line">	var slideshow = document.createElement(&quot;div&quot;);</span><br><span class="line">	slideshow.setAttribute(&quot;id&quot;,&quot;slideshow&quot;);</span><br><span class="line">	var preview = document.createElement(&quot;img&quot;);</span><br><span class="line">	preview.setAttribute(&quot;src&quot;,&quot;images/topics.gif&quot;);</span><br><span class="line">	preview.setAttribute(&quot;alt&quot;,&quot;building blocks of web design&quot;);</span><br><span class="line">	preview.setAttribute(&quot;id&quot;,&quot;preview&quot;);</span><br><span class="line">	slideshow.appendChild(preview);</span><br><span class="line">	var list = document.getElementById(&quot;linklist&quot;);</span><br><span class="line">	insertAfter(slideshow,list);</span><br><span class="line"></span><br><span class="line">	var links = list.getElementsByTagName(&quot;a&quot;);</span><br><span class="line">	</span><br><span class="line">	links[0].onmouseover = function() &#123;</span><br><span class="line">		moveElement(&quot;preview&quot;,-100,0,10);</span><br><span class="line">	&#125;</span><br><span class="line">	links[1].onmouseover = function() &#123;</span><br><span class="line">		moveElement(&quot;preview&quot;,-200,0,10);</span><br><span class="line">	&#125;</span><br><span class="line">	links[2].onmouseover = function() &#123;</span><br><span class="line">		moveElement(&quot;preview&quot;,-300,0,10);</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveElement(elementID,final_x,final_y,interval) &#123;</span><br><span class="line">	if (!document.getElementById) return false;</span><br><span class="line">	if (!document.getElementById(elementID)) return false;</span><br><span class="line">	var elem = document.getElementById(elementID);</span><br><span class="line">	if (elem.movement) &#123;</span><br><span class="line">		clearTimeout(elem.movement);</span><br><span class="line">	&#125;</span><br><span class="line">	if(!elem.style.left||!elem.style.top) &#123;</span><br><span class="line">		elem.style.left = &quot;0px&quot;;</span><br><span class="line">		elem.style.top = &quot;0px&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	var xpos = parseInt(elem.style.left);</span><br><span class="line">	var ypos = parseInt(elem.style.top);</span><br><span class="line">	var dist = 0;</span><br><span class="line">	if(xpos == final_x &amp;&amp; ypos == final_y) &#123; return true; &#125;</span><br><span class="line">	if (xpos &lt; final_x) &#123;</span><br><span class="line">		dist = Math.ceil((final_x - xpos)/10);</span><br><span class="line">		xpos += dist;</span><br><span class="line">	&#125;</span><br><span class="line">	if (xpos &gt; final_x) &#123;</span><br><span class="line">		dist = Math.ceil((xpos - final_x)/10);</span><br><span class="line">		xpos -= dist;</span><br><span class="line">	&#125;</span><br><span class="line">	if (ypos &lt; final_y) &#123;</span><br><span class="line">		dist = Math.ceil((final_y - ypos)/10);</span><br><span class="line">		ypos += dist;</span><br><span class="line">	&#125;</span><br><span class="line">	if (ypos &gt; final_y) &#123;</span><br><span class="line">		dist = Math.ceil((ypos - final_y)/10);</span><br><span class="line">		ypos -= dist;</span><br><span class="line">	&#125;</span><br><span class="line">	elem.style.left = xpos + &quot;px&quot;;</span><br><span class="line">	elem.style.top = ypos + &quot;px&quot;;</span><br><span class="line">	var repeat = &quot;moveElement(&apos;&quot;+elementID+&quot;&apos;,&quot;+final_x+&quot;,&quot;+final_y+&quot;,&quot;+interval+&quot;)&quot;;</span><br><span class="line">	elem.movement = setTimeout(repeat,interval);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="第十一章：HTML5"><a href="#第十一章：HTML5" class="headerlink" title="第十一章：HTML5"></a>第十一章：HTML5</h2><p>&#160; &#160; &#160;&#160;本章介绍了一些HTML5的新特性</p>
<ul>
<li><a href="http://www.modernizr.com/" target="_blank" rel="noopener">Modernizr</a>，它可以用于检测浏览器可能支持的特性，应用它最好放在<code>head</code>元素中</li>
<li>Canvas，画布，它可以动态创建和操作图形图像<br>，<a href="http://www.w3school.com.cn/tags/tag_canvas.asp" target="_blank" rel="noopener">使用规范</a></li>
<li>音频和视频，HTML5的<code>video</code>元素为在文档中嵌入影片以及与影片交互定义了一种标准方式，同时将这种操作简化为一个标签，格式问题在我看的前一本书《HF HTML&amp;CSS》中也有提及</li>
<li>自定义控件 <ul>
<li><code>currentTime</code>，返回当前播放的位置，以秒表示</li>
<li><code>duration</code>，返回媒体的总时长，以秒表示，对于流媒体返回无穷大</li>
<li><code>paused</code>，表示媒体是否处于暂停状态</li>
<li><code>play</code>，在媒体播放开始时发生</li>
<li><code>pause</code>，在媒体暂停时发生</li>
<li><code>loadeddata</code>，在媒体可以从当前播放位置开始播放时发生</li>
<li><code>ended</code>，在媒体播放完成而停止时发生</li>
<li><code>control</code>，这个属性不要忘记添加在<code>video</code>元素中，书中只给了一个写播放暂停按键的例子</li>
<li>表单，在不支持HTML5的浏览器上可以通过DOM实现</li>
</ul>
</li>
</ul>
<hr>
<h2 id="第十二章：综合示例"><a href="#第十二章：综合示例" class="headerlink" title="第十二章：综合示例"></a>第十二章：综合示例</h2><p>&#160; &#160; &#160;&#160;将这本书所学的内容综合起来完成一个网站</p>
<ul>
<li>原始资料</li>
<li>站点结构，<code>images</code>，<code>styles</code>，<code>scripts</code>，页面<code>Home About Photos Lives Contact</code></li>
<li>CSS，颜色color，布局layout，版式typography，在这个例子里 内边距放在布局中，外边距放在版式中</li>
<li>标记</li>
<li>JavaScript，先建立一个global.js用于保存一些通用函数例如之前所用到的<code>addLoadEvent(func) insertAfter(newElement, targetElement) addClass(element, value)</code></li>
<li>页面突出显示<code>highlightPage</code>，利用<code>getAttribute(&quot;href&quot;)</code>获取链接的URL，利用<code>window.location.href</code>获取当前页面的url，<code>indexOf</code>可以用来在字符串中寻找子字符串的位置<code>string.indexOf(substring)</code>，返回-1即为失败</li>
<li><code>toLowerCase</code>该方法可以将文本转换成小写</li>
<li><p>点击内部链接后，会在连接后包含一串字符串，以#为分隔符，<code>about.html#jay</code>，这里利用split方法可以便捷的将字符串分成多串，<code>array = string.split(character)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    function showSection(id) &#123;</span><br><span class="line">	var sections =document.getElementsByTagName(&quot;section&quot;);</span><br><span class="line">	for (var i=0; i&lt;sections.length; i++) &#123;</span><br><span class="line">		if (sections[i].getAttribute(&quot;id&quot;) != id) &#123;</span><br><span class="line">			sections[i].style.display = &quot;none&quot;;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			sections[i].style.display = &quot;block&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function prepareInternalnav() &#123;</span><br><span class="line">	if (!document.getElementsByTagName) return false;</span><br><span class="line">	if (!document.getElementById) return false;</span><br><span class="line">	var articles = document.getElementsByTagName(&quot;article&quot;);</span><br><span class="line">	if (articles.length == 0) return false;</span><br><span class="line">	var navs = articles[0].getElementsByTagName(&quot;nav&quot;);</span><br><span class="line">	if (navs.length == 0) return false;</span><br><span class="line">	var nav = navs[0];</span><br><span class="line">	var links = nav.getElementsByTagName(&quot;a&quot;);</span><br><span class="line">	for (var i=0; i&lt;links.length; i++) &#123;</span><br><span class="line">		var sectionId = links[i].getAttribute(&quot;href&quot;).split(&quot;#&quot;)[1];</span><br><span class="line">		if (!document.getElementById(sectionId)) continue;</span><br><span class="line">		document.getElementById(sectionId).style.display = &quot;none&quot;;</span><br><span class="line">		links[i].destination = sectionId;</span><br><span class="line">		links[i].onclick = function() &#123;</span><br><span class="line">		//一开始一下子没绕过弯，留个档</span><br><span class="line">			showSection(this.destination);</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>JavaScript图片库，将第六章第七章部分代码改一下</p>
</li>
<li>增强表格，将第九章代码进行改编</li>
<li>增强表单<ul>
<li>字段标签，<code>element.focus()</code>单击一个标签可以将焦点转移到关联的表单字段中</li>
<li>占位符值，<code>onfocus</code>事件会在焦点移入表单字段触发，<code>onblur</code>事件则反之，现代浏览器应该不需要再检查占位符值了吧</li>
<li><code>replace</code>替换，<code>field.value.replace(&#39; &#39;,&#39;&#39;)</code>将空格替换掉</li>
<li>同时，书上代码中有一段<code>element.required == &#39;required&#39;</code>代码，可能不太能用，required现在是一个bool型，在html中只需些<code>&lt;input ... required&gt;</code>即可，在js中的判断应改为<code>element.required == true</code></li>
</ul>
</li>
<li>提交表单，添加一点Ajax，首先创建一个加载图像，可以到<a href="http://ajaxload.info" target="_blank" rel="noopener">http://ajaxload.info</a>创建一个，并把此图像命名为loading.gif </li>
<li>假设表单中包含消息“Why does 2+2=4?”，然后根据<code>name=value&amp;name2=value2&amp;name3=value3</code>规则形成一个URL编码的表单数据字符串，例如<code>message=Why does 2+2=4?&amp;name=me&amp;email=me@example.com</code>的形式，但是其中诸如+、=、？可能会造成歧义，JS提供了一个函数<code>encodeURIComponent</code>可以用于把有歧义的字符转换成对应的ASCII码：<code>message=Why%20does%202%2B2%3D4%3F%26&amp;name=Me%email=me%40example.com</code>，<code>join</code>函数可以用来将数组中的所有元素通过一个分隔符进行连接并放入一个字符串中，例如<code>dataParts.join(&#39;&amp;&#39;)</code><ul>
<li>正则表达式，在JS中，正则表达式的每个模式都是以一个斜杠（/）开头和结尾，正则表达式部分待之后在看了书上也没具体写</li>
<li>这本书Ajax部分看的有点糊涂，感觉只是初步的了解，我打算看高级程序设计这本书的时候再结合起来好好理解下</li>
<li>压缩js代码，用以改进性能</li>
<li>书后附录中还简短的介绍了jQuery，不过我打算在《锋利的jQuery》中具体学习</li>
</ul>
</li>
</ul>

      
    </div>
    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/qcode.jpg" alt="Chinti wechat" style="width: 200px; max-width: 100%;"/>
    <div>=。=</div>
</div>

      </div>
    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/04/2018素描/" rel="next" title="2018素描">
                <i class="fa fa-chevron-left"></i> 2018素描
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/25/JavaScript-高级程序设计-阅读笔记（1-5）/" rel="prev" title="JavaScript 高级程序设计 阅读笔记（1-5）">
                JavaScript 高级程序设计 阅读笔记（1-5） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/1.gif"
                alt="Chinti" />
            
              <p class="site-author-name" itemprop="name">Chinti</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/Chinti" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:qinty12345@gmail.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一章：JavaScript简史"><span class="nav-number">2.</span> <span class="nav-text"><a href="#&#x7B2C;&#x4E00;&#x7AE0;&#xFF1A;JavaScript&#x7B80;&#x53F2;" class="headerlink" title="&#x7B2C;&#x4E00;&#x7AE0;&#xFF1A;JavaScript&#x7B80;&#x53F2;"></a>&#x7B2C;&#x4E00;&#x7AE0;&#xFF1A;JavaScript&#x7B80;&#x53F2;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二章：JavaScript语法"><span class="nav-number">3.</span> <span class="nav-text"><a href="#&#x7B2C;&#x4E8C;&#x7AE0;&#xFF1A;JavaScript&#x8BED;&#x6CD5;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x7AE0;&#xFF1A;JavaScript&#x8BED;&#x6CD5;"></a>&#x7B2C;&#x4E8C;&#x7AE0;&#xFF1A;JavaScript&#x8BED;&#x6CD5;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第三章：DOM"><span class="nav-number">4.</span> <span class="nav-text"><a href="#&#x7B2C;&#x4E09;&#x7AE0;&#xFF1A;DOM" class="headerlink" title="&#x7B2C;&#x4E09;&#x7AE0;&#xFF1A;DOM"></a>&#x7B2C;&#x4E09;&#x7AE0;&#xFF1A;DOM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第四章：案例研究：JavaScript图片库"><span class="nav-number">5.</span> <span class="nav-text"><a href="#&#x7B2C;&#x56DB;&#x7AE0;&#xFF1A;&#x6848;&#x4F8B;&#x7814;&#x7A76;&#xFF1A;JavaScript&#x56FE;&#x7247;&#x5E93;" class="headerlink" title="&#x7B2C;&#x56DB;&#x7AE0;&#xFF1A;&#x6848;&#x4F8B;&#x7814;&#x7A76;&#xFF1A;JavaScript&#x56FE;&#x7247;&#x5E93;"></a>&#x7B2C;&#x56DB;&#x7AE0;&#xFF1A;&#x6848;&#x4F8B;&#x7814;&#x7A76;&#xFF1A;JavaScript&#x56FE;&#x7247;&#x5E93;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第五章：最佳实践"><span class="nav-number">6.</span> <span class="nav-text"><a href="#&#x7B2C;&#x4E94;&#x7AE0;&#xFF1A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;" class="headerlink" title="&#x7B2C;&#x4E94;&#x7AE0;&#xFF1A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"></a>&#x7B2C;&#x4E94;&#x7AE0;&#xFF1A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第六章：案例研究：图片库改进版"><span class="nav-number">7.</span> <span class="nav-text"><a href="#&#x7B2C;&#x516D;&#x7AE0;&#xFF1A;&#x6848;&#x4F8B;&#x7814;&#x7A76;&#xFF1A;&#x56FE;&#x7247;&#x5E93;&#x6539;&#x8FDB;&#x7248;" class="headerlink" title="&#x7B2C;&#x516D;&#x7AE0;&#xFF1A;&#x6848;&#x4F8B;&#x7814;&#x7A76;&#xFF1A;&#x56FE;&#x7247;&#x5E93;&#x6539;&#x8FDB;&#x7248;"></a>&#x7B2C;&#x516D;&#x7AE0;&#xFF1A;&#x6848;&#x4F8B;&#x7814;&#x7A76;&#xFF1A;&#x56FE;&#x7247;&#x5E93;&#x6539;&#x8FDB;&#x7248;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第七章：动态创建标记"><span class="nav-number">8.</span> <span class="nav-text"><a href="#&#x7B2C;&#x4E03;&#x7AE0;&#xFF1A;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x6807;&#x8BB0;" class="headerlink" title="&#x7B2C;&#x4E03;&#x7AE0;&#xFF1A;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x6807;&#x8BB0;"></a>&#x7B2C;&#x4E03;&#x7AE0;&#xFF1A;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x6807;&#x8BB0;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第八章：充实文档的内容"><span class="nav-number">9.</span> <span class="nav-text"><a href="#&#x7B2C;&#x516B;&#x7AE0;&#xFF1A;&#x5145;&#x5B9E;&#x6587;&#x6863;&#x7684;&#x5185;&#x5BB9;" class="headerlink" title="&#x7B2C;&#x516B;&#x7AE0;&#xFF1A;&#x5145;&#x5B9E;&#x6587;&#x6863;&#x7684;&#x5185;&#x5BB9;"></a>&#x7B2C;&#x516B;&#x7AE0;&#xFF1A;&#x5145;&#x5B9E;&#x6587;&#x6863;&#x7684;&#x5185;&#x5BB9;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第九章：CSS-DOM"><span class="nav-number">10.</span> <span class="nav-text"><a href="#&#x7B2C;&#x4E5D;&#x7AE0;&#xFF1A;CSS-DOM" class="headerlink" title="&#x7B2C;&#x4E5D;&#x7AE0;&#xFF1A;CSS-DOM"></a>&#x7B2C;&#x4E5D;&#x7AE0;&#xFF1A;CSS-DOM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第十章：用JavaScript实现动画效果"><span class="nav-number">11.</span> <span class="nav-text"><a href="#&#x7B2C;&#x5341;&#x7AE0;&#xFF1A;&#x7528;JavaScript&#x5B9E;&#x73B0;&#x52A8;&#x753B;&#x6548;&#x679C;" class="headerlink" title="&#x7B2C;&#x5341;&#x7AE0;&#xFF1A;&#x7528;JavaScript&#x5B9E;&#x73B0;&#x52A8;&#x753B;&#x6548;&#x679C;"></a>&#x7B2C;&#x5341;&#x7AE0;&#xFF1A;&#x7528;JavaScript&#x5B9E;&#x73B0;&#x52A8;&#x753B;&#x6548;&#x679C;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第十一章：HTML5"><span class="nav-number">12.</span> <span class="nav-text"><a href="#&#x7B2C;&#x5341;&#x4E00;&#x7AE0;&#xFF1A;HTML5" class="headerlink" title="&#x7B2C;&#x5341;&#x4E00;&#x7AE0;&#xFF1A;HTML5"></a>&#x7B2C;&#x5341;&#x4E00;&#x7AE0;&#xFF1A;HTML5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第十二章：综合示例"><span class="nav-number">13.</span> <span class="nav-text"><a href="#&#x7B2C;&#x5341;&#x4E8C;&#x7AE0;&#xFF1A;&#x7EFC;&#x5408;&#x793A;&#x4F8B;" class="headerlink" title="&#x7B2C;&#x5341;&#x4E8C;&#x7AE0;&#xFF1A;&#x7EFC;&#x5408;&#x793A;&#x4F8B;"></a>&#x7B2C;&#x5341;&#x4E8C;&#x7AE0;&#xFF1A;&#x7EFC;&#x5408;&#x793A;&#x4F8B;</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chinti</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("mMNtL0Pa4C7AKDTwkdDUuzg8-gzGzoHsz", "8yLqU0jMN4HFSP38ceo0nWMD");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
